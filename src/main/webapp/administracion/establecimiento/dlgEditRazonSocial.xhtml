<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Ingrese la nueva Razón social</title>
        <style type="text/css">
            .ui-widget {
                font-size: 80%;
            }
        </style>
    </h:head>
    
    <h:body>
        <h:form id="frmNew" style="text-align: left">
            <p:panel id="pnNew1" header="Razón Social (Seleccione lo que corresponda)" toggleable="true" >
                <p:messages id="messages" />
                <h:panelGrid columns="4">
                    <p:outputLabel value="Persona Física: " for="perFisica"/>                             
                    <p:selectOneMenu id="perFisica" value="#{mbEstablecimiento.selected.perFisica}" 
                                     disabled="#{not mbEstablecimiento.esJuridica}" 
                                     valueChangeListener="#{mbEstablecimiento.fisicaChangeListener}" >
                          <f:selectItem itemLabel="Seleccione la Persona Física" itemValue="" noSelectionOption="true" />                           
                          <f:selectItems value="#{mbEstablecimiento.listaPerFisica}" var="perFis" 
                                         itemLabel="#{perFis.cuitCuil} - #{perFis.nombreCompleto}" 
                                         itemValue="#{perFis}"/>
                          <p:ajax event="change" update="perJuridica,btnNewJuridica"/>
                    </p:selectOneMenu>
                    <p:commandButton icon="ui-icon-refresh" process="@this" actionListener="#{mbEstablecimiento.actualizarPerFisicas}" update="perFisica" /> 
                    <p:commandButton id="btnNewFisica" disabled="#{not mbEstablecimiento.esJuridica}" value="Agergar Nueva" 
                                     action="#{mbEstablecimiento.addPerFisica}" 
                                     icon="ui-icon-extlink" process="@this" style="width: 170px" /> 

                    <p:outputLabel value="Persona Jurídica: " for="perJuridica"/>                             
                    <p:selectOneMenu id="perJuridica" value="#{mbEstablecimiento.selected.perJuridica}" 
                                     disabled="#{not mbEstablecimiento.esFisica}" 
                                     valueChangeListener="#{mbEstablecimiento.juridicaChangeListener}">
                          <f:selectItem itemLabel="Seleccione la Persona Jurídica" itemValue="" noSelectionOption="true" />                           
                          <f:selectItems value="#{mbEstablecimiento.listaPerJuridica}" var="perJur" 
                                         itemLabel="#{perJur.cuit} - #{perJur.razonSocial}" 
                                         itemValue="#{perJur}"/>
                          <p:ajax event="change" update="perFisica,btnNewFisica"/>
                    </p:selectOneMenu> 
                    <p:commandButton icon="ui-icon-refresh" process="@this" actionListener="#{mbEstablecimiento.actualizarPerJuridicas}" update="perJuridica" /> 
                    <p:commandButton id="btnNewJuridica" disabled="#{not mbEstablecimiento.esFisica}" value="Agergar Nueva" 
                                     action="#{mbEstablecimiento.addPerJuridica}" 
                                     icon="ui-icon-extlink" process="@this" style="width: 170px" /> 
                    <p:outputLabel value="Motivo: " for="motivo"/>
                    <p:inputText id="motivo" value="#{mbEstablecimiento.rsNueva.motivo}" style="width: 500px" />
                    
                </h:panelGrid>
                <h:panelGrid columns="1">
                    <p:commandButton value="Guardar" update="pnNew1" action="#{mbEstablecimiento.actualizarEditRazonSocial}" />
                </h:panelGrid>
            </p:panel>
        </h:form>
    </h:body>
</html>                     
